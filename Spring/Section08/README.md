## 섹션 8. 빈 생명주기 콜백
간단한 버전의 스프링 빈 생명주기 : 객체 생성 -> 의존관계 주입, 의존관계 주입까지 완료된 이후에야 초기화 작업이 가능하다.  
-> 초기화 작업 하려는데 그럼 주입까지 완료되었는지 내가 어떻게 아나?  
-> 콜백 메서드를 통해 초기화 시점을 알려준다.  

### 스프링 빈 이벤트 라이프 사이클
- 스프링 컨테이너 생성 -> 스프링 빈 생성 -> 의존관계 주입 -> 초기화 콜백 -> 사용 -> 소멸전 콜백 -> 스프링 종료  

### 콜백의 종류
- 초기화 콜백 : 빈이 생성되고, 빈의 의존관계 주입이 완료된 후 호출된다.
- 소멸전 콜백 : 빈이 소멸되기 직전에 소출

### 객체의 생성과 초기화의 분리
- 단일책임원칙 :  생성은 생성만 집중해야 한다. 초기화는 객체의 실제 동작에 포함된다. 가령 외부 커넥션을 연결하고, 값을 할당받고 하기 때문이다. 그러므로 분리하여 사용하는게 단일책임원칙을 지킬 수 있고, 유지보수관점에서도 좋다.
- 생성자에선 뭘 할 수 있나요? 파라미터 등의 필수 정보를 받고, 메모리를 할당하는 일까지만 하면 됨.

### 그럼 외부 커넥션과의 연결 종료 등은 어떻게 하나요?
1. 인터페이스 (InitializingBean, DisposableBean)
2. 설정 정보에 초기화 메서드, 종료 메서드 지정
3. @PostConstruct, @PreDestroy 애노테이션 지원

### 인터페이스 InitializingBean, DisposableBean
- implements 해서 넣어주니까 afterPropertiesSet()과 destroy()가 오버라이드되었다. 초기화 메서드가 주입 완료 후에 적절하게 호출되긴 했으나, 초기화, 소멸 메서드의 이름도 변경할 수 없고 코드를 고칠 수 없는 외부 라이브러리엔 적용할 수가 없다. -> 스프링 초창기에만 썼고, 지금은 거의 쓰지 않는다.

### 빈 등록 초기화, 소멸 메서드 지정
- `@Bean(initMethod=“init”, destroyMethod=“close”)` 처럼 초기화, 소멸 메서드를 지정할 수 있다. 설정 정보를 사용하도록 변경하고, 설정 정보에 초기화 메서드와 소멸 메서드를 지정해준다.
- 특히 종료 메서드는 추론 기능(inferred)이 있다. close, shutdown 이라는 이름의 메서드를 자동으로 종료 메서드로 추론해서 호출해주는 기능이다. 스프링 빈으로 등록해두면 알아서 추론해서 스프링이 호출해준다.

### 어노테이션 @PostConstruct, @PreDestroy
- 이 방법을 쓰면 된다!
- javax 패키지에서 가져오므로, 자바에서 공식적으로 지원하는 문법이다. -> 다른 컨테이너에서도 동작한다.
- 최신 스프링에서 해당 방법을 추천하고, 애노테이션만 붙이면 되어서 편리하다.
- 단점 : 외부 라이브러리에서는 적용하지 못한다.